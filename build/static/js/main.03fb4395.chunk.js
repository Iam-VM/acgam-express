(this["webpackJsonpacgam-react-app"]=this["webpackJsonpacgam-react-app"]||[]).push([[0],{17:function(e,t,n){e.exports={logout:"certGenStyles_logout__32fpX",avatar:"certGenStyles_avatar__hwObT",button:"certGenStyles_button__3yCVr",navButton:"certGenStyles_navButton__2aSAQ",circle:"certGenStyles_circle__VuPzq",initials:"certGenStyles_initials__1SfLh",buttons:"certGenStyles_buttons__2tfyd",container:"certGenStyles_container__7ofjT",card:"certGenStyles_card__HqQCW",cardHeader:"certGenStyles_cardHeader__2yPPW",cardBody:"certGenStyles_cardBody__jb_Xf",logo:"certGenStyles_logo__2DjcE"}},40:function(e,t,n){e.exports={boxCenter:"loginStyles_boxCenter__sgBQl",loginContainer:"loginStyles_loginContainer__va9Bx",loginRow:"loginStyles_loginRow__1xb4c",sectionTop:"loginStyles_sectionTop__1fJae",heroImg:"loginStyles_heroImg__2GdZB",loginForm:"loginStyles_loginForm__d7MZo"}},595:function(e,t,n){},630:function(e,t,n){"use strict";n.r(t);var c=n(28),a=n(0),r=n.n(a),s=n(35),i=n.n(s),o=n(152),l=n(38),u=n(106),j=n(19),d=n(217),b=n.n(d),O=n(325),h=n(15),p=n(21),f=n(59),m=n.n(f),x=n(643),v=n(642),g=n(637),S=n(640),y=n(17),C=n.n(y),_=n(2),B=function(e){return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)(S.a,Object(c.a)(Object(c.a)({},e),{},{animation:!1,children:[Object(_.jsx)(S.a.Header,{closeButton:!0,children:Object(_.jsx)(S.a.Title,{children:"Sign Out"})}),Object(_.jsx)(S.a.Body,{children:"Are you sure?"}),Object(_.jsx)(S.a.Footer,{children:Object(_.jsx)(g.a,{className:C.a.navButton,onClick:e.signOut,children:"Yes!"})})]}))})},k=n.p+"static/media/logo.fad3a755.png",N=function(e){var t=e.userState,n=e.signOut,c=Object(a.useState)(!1),r=Object(h.a)(c,2),s=r[0],i=r[1];return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)(x.a,{bg:"light",expand:"lg",children:[Object(_.jsx)(x.a.Brand,{className:C.a.avatar,children:Object(_.jsx)("div",{className:C.a.circle,children:Object(_.jsx)("span",{class:C.a.initials,children:t.name[0]})})}),Object(_.jsx)(v.a,{children:Object(_.jsxs)(v.a.Link,{className:C.a.logo,children:[Object(_.jsx)("img",{alt:"",src:k,width:"93",height:"43"})," "]})}),Object(_.jsx)(x.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(_.jsx)(x.a.Collapse,{id:"basic-navbar-nav",children:Object(_.jsx)(v.a,{className:"ml-auto",children:Object(_.jsx)(v.a.Link,{children:Object(_.jsx)(g.a,{className:C.a.navButton,onClick:function(){i(!0)},children:"Sign Out"})})})}),Object(_.jsx)(B,{show:s,signOut:n,onHide:function(){return i(!1)}})]})})},T=n(327),w=n.n(T),I=(n(508),function(e){var t=e.setBodyState,n=Object(a.useRef)(""),c=Object(a.useState)(new Date),r=Object(h.a)(c,2),s=r[0],i=r[1],o=Object(a.useState)(!1),l=Object(h.a)(o,2),u=l[0],j=l[1],d=Object(a.useState)(null),b=Object(h.a)(d,2),O=b[0],p=b[1],f=Object(a.useState)(!0),x=Object(h.a)(f,2),v=x[0],g=x[1];return Object(_.jsxs)("div",{children:[Object(_.jsxs)("div",{children:[Object(_.jsx)("input",{type:"text",ref:n,placeholder:"enter event name"}),Object(_.jsx)(w.a,{selected:s,onChange:function(e){return i(e)}}),u?Object(_.jsx)("div",{children:"Loading"}):!1===v?Object(_.jsx)("div",{children:"Sorry, Couldn't reach server.. !!"}):!0===O?Object(_.jsx)("div",{children:"Event Added Successfully"}):!1===O?Object(_.jsx)("div",{children:"Event not added, there were some issues."}):null,Object(_.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault();j(!0),m.a.post("/private/event/add",JSON.stringify({startDate:s,eventName:n.current.value}),{headers:{"Content-Type":"application/JSON"}}).then((function(e){j(!1),200===e.status?(g(!0),p(!0)):(g(!0),p(!1))})).catch((function(e){j(!1),g(!1)}))},children:"Add"})]}),Object(_.jsx)("button",{onClick:function(){return t("root")},children:"Back"})]})}),F=n(330),E=n.n(F),A=n(638),P=n(331),G=n(644),W=function(e){var t=e.setBodyState,n=function(e){m()({method:"get",url:"/private/csv-template/".concat(e),responseType:"blob"}).then((function(t){E()(t.data,"".concat(e,".csv"))}))};return Object(_.jsx)("div",{className:C.a.container,children:Object(_.jsxs)(A.a,{className:C.a.buttons,children:[Object(_.jsx)(P.a,{md:6,sm:12,children:Object(_.jsxs)(G.a,{className:C.a.card,children:[Object(_.jsx)(G.a.Header,{className:C.a.cardHeader,children:"Downloads"}),Object(_.jsxs)(G.a.Body,{className:C.a.cardBody,children:[Object(_.jsx)(g.a,{className:C.a.button,onClick:function(){return n("coordinators")},children:"Coordinators CSV Template"}),Object(_.jsx)(g.a,{className:C.a.button,onClick:function(){return n("participants")},children:"Participants CSV Template"}),Object(_.jsx)(g.a,{className:C.a.button,onClick:function(){return n("winners")},children:"Winners CSV Template"})]})]})}),Object(_.jsx)(P.a,{md:6,sm:12,children:Object(_.jsxs)(G.a,{className:C.a.card,children:[Object(_.jsx)(G.a.Header,{className:C.a.cardHeader,children:"Additional"}),Object(_.jsxs)(G.a.Body,{className:C.a.cardBody,children:[Object(_.jsx)(g.a,{className:C.a.button,onClick:function(){return t("eventAdd")},children:"Add an Event"}),Object(_.jsx)(g.a,{className:C.a.button,onClick:function(){return t("sendCerts")},children:"Mail Certificates"})]})]})})]})})},D=n(332),L=n.n(D),R=function(e){var t=e.setBodyState;return Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{children:"Sorry, Couldn't reach server !!"}),Object(_.jsx)("button",{onClick:function(){return t("root")},children:"Back"})]})},V=function(e){e.socket,e.setSendingCertsFlag;var t=e.log;return Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{children:"Loading..."}),Object(_.jsx)("div",{children:t})]})},H=function(e){var t=e.event,n=e.formSubmitHandler,c=e.setConfirmBoxFlag;return Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{children:"Are you sure you want to send ?"}),Object(_.jsx)("div",{onClick:function(){return n(t)},children:"Yes, I'm sure"}),Object(_.jsx)("div",{onClick:function(){return c(!1)},children:"Never mind"})]})},J=function(e){var t=e.setBodyState,n=Object(a.useRef)(null),c=Object(a.useRef)(null),r=Object(a.useRef)(null),s=Object(a.useState)([]),i=Object(h.a)(s,2),o=i[0],l=i[1],u=Object(a.useState)(null),j=Object(h.a)(u,2),d=j[0],b=j[1],O=Object(a.useState)(0),p=Object(h.a)(O,2),f=p[0],x=p[1],v=Object(a.useState)(!0),g=Object(h.a)(v,2),S=g[0],y=g[1],C=Object(a.useState)(null),B=Object(h.a)(C,2),k=B[0],N=B[1],T=Object(a.useState)(null),w=Object(h.a)(T,2),I=w[0],F=w[1],E=Object(a.useState)(!0),A=Object(h.a)(E,2),P=A[0],G=A[1],W=Object(a.useState)(!0),D=Object(h.a)(W,2),J=D[0],M=D[1],U=Object(a.useState)(!1),Q=Object(h.a)(U,2),q=Q[0],z=Q[1],X=Object(a.useState)(!1),Y=Object(h.a)(X,2),Z=Y[0],K=Y[1],$=Object(a.useState)(null),ee=Object(h.a)($,2),te=ee[0],ne=ee[1],ce=Object(a.useState)(null),ae=Object(h.a)(ce,2),re=ae[0],se=ae[1];Object(a.useEffect)((function(){b(!0),m.a.get("private/event/fetch-all").then((function(e){200===e.status?(l(e.data.reverse()),G(!0),b(!1)):(G(!1),b(!1))})).catch((function(e){console.log("get error"),M(!1),G(!1),b(!1)}))}),[]);return d?Object(_.jsx)("div",{children:"Loading..."}):J?P?q?Object(_.jsx)(V,{socket:null,setSendingCertsFlag:z,log:re}):Object(_.jsxs)("div",{children:[Object(_.jsxs)("form",{onSubmit:function(e){e.preventDefault(),ne(e),K(!0)},children:[Object(_.jsxs)("label",{children:["Choose an event:",Object(_.jsx)("select",{ref:n,name:"eventName",disabled:d,children:null!==o?o.map((function(e){return Object(_.jsx)("option",{value:e.id,children:e.eventName},e.id)})):Object(_.jsx)("option",{children:"loading"})})]}),Object(_.jsxs)("label",{children:["Choose a Template:",Object(_.jsxs)("select",{ref:c,name:"templateName",children:[Object(_.jsx)("option",{value:"SB Template - Coordinators",children:"SB Template - Coordinators"}),Object(_.jsx)("option",{value:"SB Template - Participants",children:"SB Template - Participants"}),Object(_.jsx)("option",{value:"SB Template - Volunteers",children:"SB Template - Volunteers"}),Object(_.jsx)("option",{value:"SB Template - Winners",children:"SB Template - Winners"}),Object(_.jsx)("option",{value:"CS Template - Participants",children:"CS Template - Participants"}),Object(_.jsx)("option",{value:"CS Template - Winners",children:"CS Template - Winners"}),Object(_.jsx)("option",{value:"IAS Template - Participants",children:"IAS Template - Participants"}),Object(_.jsx)("option",{value:"IAS Template - Winners",children:"IAS Template - Winners"}),Object(_.jsx)("option",{value:"WIE Template - Participants",children:"WIE Template - Participants"}),Object(_.jsx)("option",{value:"WIE Template - Winners",children:"WIE Template - Winners"})]})]}),Object(_.jsxs)("label",{children:[Object(_.jsx)("input",{type:"file",name:"uploadedFile",ref:r,onChange:function(){y(!1),x(0),console.log(r.current.files[0].type),["text/csv","text/comma-separated-values","application/csv"].includes(r.current.files[0].type)||(y(!0),x(2),r.current.value="")}}),Object(_.jsx)("p",{children:2===f?"Unsupported file format":null})]}),Object(_.jsx)("p",{children:k}),Object(_.jsx)("p",{children:I}),Object(_.jsx)("input",{type:"submit",name:"Send",disabled:S}),Z?Object(_.jsx)(H,{setConfirmBoxFlag:K,event:te,formSubmitHandler:function(e){e.preventDefault();var t=L()();if(z(!0),null!==r.current.files[0]){x(0);var a=new FormData;a.append("eventID",n.current.value),a.append("templateName",c.current.value),a.append("file",r.current.files[0]),N(null),F(null),t.on("log",(function(e){se(e)})),m.a.post("/private/send",a).then((function(e){switch(console.log(e.data),e.status){case 200:if(["CSV File Poorly Formatted","Certificate Template Not Found"].includes(e.data)){N(e.data),t.disconnect(),y(!0),K(!1),z(!1);break}N(null),F(e.data),t.disconnect(),y(!0),K(!1),z(!1);break;case 500:N(e.data),F(null),t.disconnect(),y(!0),K(!1),z(!1);break;default:F(null),N("Some Unknown Issues Occurred"),t.disconnect(),y(!0),K(!1),z(!1)}})).catch((function(e){t.disconnect(),N("Couldn't connect to server..."),y(!0),K(!1),z(!1)}))}else x(1)}}):null]}),Object(_.jsx)("button",{onClick:function(){return t("root")},children:"Back"})]}):Object(_.jsx)("div",{children:"Sorry, there was a problem while fetching events!!"}):Object(_.jsx)(R,{setBodyState:t})},M=function(){var e=Object(a.useState)("root"),t=Object(h.a)(e,2),n=t[0],c=t[1];return"eventAdd"===n?Object(_.jsx)(I,{setBodyState:c}):"root"===n?Object(_.jsx)(W,{setBodyState:c}):Object(_.jsx)(J,{setBodyState:c})},U=n(157),Q=function(){return Object(_.jsx)("div",{children:Object(_.jsx)(x.a,{bg:"light",expand:"lg",className:"sticky-bottom",children:Object(_.jsxs)(v.a,{className:"ml-auto ",children:[Object(_.jsx)(v.a.Link,{href:"https://github.com/Computer-Society-Chapter/acgam-react-app",target:"_blank",children:Object(_.jsx)(U.a,{})}),Object(_.jsx)(v.a.Link,{href:"https://www.linkedin.com/company/ieeesbgecpkd",target:"_blank",children:Object(_.jsx)(U.c,{})}),Object(_.jsx)(v.a.Link,{href:"https://www.instagram.com/ieeesbgecpkd",target:"_blank",children:Object(_.jsx)(U.b,{})})]})})})},q=function(){var e=Object(l.c)((function(e){return e.firebase.auth}));Object(p.useFirestoreConnect)({collection:"users",doc:e.uid});var t=Object(j.g)(),n=Object(p.useFirebase)(),c=Object(l.c)((function(e){return e.firestore})),r=Object(a.useState)({name:"",role:"",picture:""}),s=Object(h.a)(r,2),i=s[0],o=s[1];Object(a.useEffect)((function(){if(console.log("insiude useEffect"),c&&c.data&&c.data.users&&c.data.users[e.uid]){var t=c.data.users[e.uid];o({name:t.name,role:t.role,picture:t.picture})}}),[]),m.a.interceptors.request.use(function(){var e=Object(O.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.auth().currentUser.getIdToken();case 2:return t.headers.idToken=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),Object(p.useFirestoreConnect)({collection:"users",doc:e.uid});return Object(_.jsxs)("div",{children:[Object(_.jsx)(N,{userState:i,signOut:function(){n.logout().then((function(){t.push("/login")})).catch((function(e){}))}}),Object(_.jsx)(M,{}),Object(_.jsx)(Q,{})]})},z=function(){return Object(_.jsx)(q,{})},X=n(40),Y=n.n(X),Z=n(639),K=n(641),$=function(){var e=Object(a.useState)(!1),t=Object(h.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),s=Object(h.a)(r,2),i=(s[0],s[1]),o=Object(a.useRef)(null),u=Object(a.useRef)(null),d=Object(j.g)(),b=Object(p.useFirebase)(),O=(Object(l.c)((function(e){return e.firebase.auth})),function(e){e.preventDefault(),c(!0),console.log("reached before if"),(""!==o.current.value&&""!==u.current.value||(i("Please Enter Email and password"),0))&&(console.log(o.current.value),b.login({email:o.current.value,password:u.current.value}).then((function(e){d.push("/")})).catch((function(e){i(e),o.current.value="",u.current.value="",c(!1)})))});return Object(_.jsx)(Z.a,{fluid:!0,className:"".concat(Y.a.loginContainer," ").concat(Y.a.boxCenter),children:Object(_.jsxs)(A.a,{className:"".concat(Y.a.loginRow," ").concat(Y.a.boxCenter),children:[Object(_.jsxs)("div",{className:"col-12 ".concat(Y.a.sectionTop," ").concat(Y.a.boxCenter),children:[Object(_.jsx)("img",{src:k,alt:"img here ",className:Y.a.heroImg}),Object(_.jsx)("h1",{children:"ACGAM"}),Object(_.jsx)("h3",{children:"Welcome Back :)"})]}),Object(_.jsx)("div",{className:"col-12 ".concat(Y.a.sectionBottom," ").concat(Y.a.boxCenter),children:Object(_.jsxs)(K.a,{className:"col-md-6 m-5 ".concat(Y.a.loginForm),children:[Object(_.jsxs)(K.a.Group,{controlId:"formBasicEmail",children:[Object(_.jsx)(K.a.Control,{type:"email",placeholder:"Enter email",ref:o,required:!0}),Object(_.jsx)(K.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(_.jsx)(K.a.Group,{controlId:"formBasicPassword",children:Object(_.jsx)(K.a.Control,{type:"password",placeholder:"Password",ref:u,required:!0})}),Object(_.jsx)(g.a,{size:"sm",variant:"primary",type:"submit",disabled:n,onClick:function(e){return O(e)},className:Y.a.submitBtn,children:"Submit"})]})})]})})},ee=function(){return Object(_.jsx)($,{})},te=(n(595),function(){return Object(_.jsx)("div",{children:"error 404 Not found"})}),ne=n(222),ce=function(e){var t=e.children,n=Object(ne.a)(e,["children"]),a=Object(l.c)((function(e){return e.firebase.auth}));return console.log(Object(p.isLoaded)(a)?"Auth is loaded":"auth is not loaded"),console.log(Object(p.isEmpty)(a)?"user is not authenticated":"User is authenticated"),Object(_.jsx)(j.b,Object(c.a)(Object(c.a)({},n),{},{render:function(){return Object(p.isLoaded)(a)?(console.log("reached here"),Object(p.isEmpty)(a)?Object(_.jsx)(j.a,{to:"/login"}):t):Object(_.jsx)("div",{children:"loading"})}}))},ae=function(e){var t=e.children,n=Object(ne.a)(e,["children"]),a=Object(l.c)((function(e){return e.firebase.auth}));return console.log(Object(p.isLoaded)(a)?"Auth is loaded":"auth is not loaded"),console.log(Object(p.isEmpty)(a)?"user is not authenticated":"User is authenticated"),Object(_.jsx)(j.b,Object(c.a)(Object(c.a)({},n),{},{render:function(){return Object(p.isLoaded)(a)?Object(p.isEmpty)(a)?t:Object(_.jsx)(j.a,{to:"/"}):Object(_.jsx)("div",{children:"loading"})}}))},re=n(111);n(596),n(635);re.a.initializeApp({apiKey:"AIzaSyAtgVeRMwtPBwZ8fwtnVyVF4MlQnQ4KX6Q",authDomain:"acgam-ieeecs.firebaseapp.com",projectId:"acgam-ieeecs",storageBucket:"acgam-ieeecs.appspot.com",messagingSenderId:"393652456887",appId:"1:393652456887:web:0adbc8ff570f03f8006c32",measurementId:"G-0JXMYVLTSD"}),re.a.auth(),re.a.firestore();var se=re.a;var ie=function(){var e=Object(l.b)();return Object(a.useEffect)((function(){se.auth().onAuthStateChanged((function(t){e({type:"SET_UID",uid:t?t.uid:null})}))}),[]),Object(_.jsx)(u.a,{children:Object(_.jsxs)(j.d,{children:[Object(_.jsx)(ce,{exact:!0,path:"/",children:Object(_.jsx)(j.b,{component:z})}),Object(_.jsx)(ae,{path:"/login",children:Object(_.jsx)(j.b,{component:ee})}),Object(_.jsx)(j.b,{component:te})]})})},oe=n(149),le={uid:null},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_UID":return Object(c.a)(Object(c.a)({},e),{},{uid:t.uid});default:return Object(c.a)({},e)}},je=Object(o.a)({auth:ue,firebase:p.firebaseReducer,firestore:oe.firestoreReducer}),de=(n(629),function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){}}()),be=Object(o.b)(je,de);be.subscribe((function(){return function(e){try{var t=JSON.stringify(e);return localStorage.setItem("state",t),e}catch(n){}}(be.getState())}));var Oe={firebase:se,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:be.dispatch,createFirestoreInstance:oe.createFirestoreInstance};i.a.render(Object(_.jsx)(l.a,{store:be,children:Object(_.jsx)(p.ReactReduxFirebaseProvider,Object(c.a)(Object(c.a)({},Oe),{},{children:Object(_.jsx)(r.a.StrictMode,{children:Object(_.jsx)(ie,{})})}))}),document.getElementById("root"))}},[[630,1,2]]]);
//# sourceMappingURL=main.03fb4395.chunk.js.map